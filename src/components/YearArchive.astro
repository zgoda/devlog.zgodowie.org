---
import { loadAndFormatPostsCollection } from '../lib/collection';

const allPosts = await loadAndFormatPostsCollection();
const years = [
  ...new Set(allPosts.map((post) => post.data.pubDate.getFullYear())),
].sort();
---

<div class="years">
  {
    years.map((year) => (
      <p class="year">
        <a href={`/blog/${year}`} data-astro-prefetch>
          {year}
        </a>
      </p>
    ))
  }
</div>

<style>
  a {
    color: #00539f;
    text-decoration: none;
  }

  .years {
    display: flex;
    flex-wrap: wrap;
    margin-bottom: var(--pico-typography-spacing-vertical);
  }

  .year {
    margin: 0.25em;
    border: dotted 1px #a1a1a1;
    border-radius: 0.5em;
    padding: 0.5em 1em;
    font-size: 1.15em;
    background-color: #f8fcfd;
  }
</style>
